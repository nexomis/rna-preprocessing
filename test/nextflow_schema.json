{
    "$schema": "http://json-schema.org/draft-07/schema",
    "$id": "https://raw.githubusercontent.com/nexomis/DE-Preprocessing/master/nextflow_schema.json",
    "title": "nexomis/DE-Preprocessing pipeline parameters",
    "description": "Estimate the expression level of features (genes or transcripts) and perform the associated QC. Starting from cleaned reads and one pre-built reference database in standard format (cf. Readme.md).",
    "type": "object",
    "definitions": {
        "input_output_options": {
            "title": "Input/output options",
            "type": "object",
            "description": "Define where the pipeline should find input data and save output data.",
            "required": ["input_dir", "out_dir"],
            "properties": {
                "input_dir": {
                    "type": "string",
                    "format": "directory-path",
                    "exists": true, 
                    "description": "The input directory with sequence files. Spring files will be decompressed. If given, sample_sheet is ignored. [Required]"
                },
                "out_dir": {
                    "type": "string",
                    "format": "directory-path",
                    "exists": false,
                    "description": "The output directory where the results will be saved (must not already exist).",
                    "default": "out_dir"
                },
                "reads_orientation": {
                    "type": "string",
                    "enum": ["unstranded", "fr-stranded", "rf-stranded"],
                    "default": "unstranded",
                    "description": "Reads orientation."
                },
                "publish_dir_mode": {
                    "type": "string",
                    "description": "PublishDir mode for process",
                    "default": "link"
                }
            }
        },
        "kallisto_quant": {
            "title": "Kallisto: quant",
            "type": "object",
            "description": "Options for the quantification tools of kallisto software (`kallisto quant`).",
            "required": ["kallisto_idx"],
            "properties": {
                "kallisto_idx": {
                    "type": "string",
                    "format": "file",
                    "exists": true,
                    "description": "The file containing the kallisto transcriptome index in standard format (output of 'kallisto index'). [Required]"
                },
                "kallisto_quant_other": {
                    "type": "string",
                    "description": "Additional parameters of kallisto. Be careful, the redundancy of arguments between those entered here and those entered as direct worflow arguments is not controlled and can therefore lead to bad behavior. "
                }
            }
        },
        "resources_options": {
            "title": "Resources options",
            "type": "object",
            "description": "Define The default resources for nextflow",
            "properties": {
                "ncpus_low": {
                    "type": "integer",
                    "default": 4,
                    "description": "Number of cpu for low process."
                },
                "ncpus_med": {
                    "type": "integer",
                    "default": 8,
                    "description": "Number of cpu for medium process."
                },
                "ncpus_high": {
                    "type": "integer",
                    "default": 16,
                    "description": "Number of cpu for high process."
                }
            }
        }
    },
    "allOf": [
        {
            "$ref": "#/definitions/input_output_options"
        },
        {
            "$ref": "#/definitions/resources_options"
        }
    ]
}